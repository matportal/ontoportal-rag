[pytest]
minversion = 6.0
addopts = -ra -q
testpaths =
    tests/unit
    tests/integration
norecursedirs = .git .* venv tests/e2e
pythonpath = .
asyncio_mode = auto

# Coverage configuration
[coverage:run]
source = src/app
omit =
    */__main__.py
    */core/logging.py # Logging is hard to test deterministically without complex setup
    */worker.py # Celery app setup is tested via integration tests

[coverage:report]
# Fail if coverage drops below 80%
fail_under = 80
show_missing = true
skip_covered = true
